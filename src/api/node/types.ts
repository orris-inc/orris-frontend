/**
 * AUTO-GENERATED - DO NOT EDIT
 * Generated by Claude from backend Go code
 * Source: orris backend node module
 * Last updated: 2025-12-29
 *
 * Note: All properties use camelCase. The axios-case-converter middleware
 * automatically converts between snake_case (API) and camelCase (frontend).
 *
 * ID Format: Stripe-style prefixed IDs
 * - Node: "node_xK9mP2vL3nQ" (prefix: node_)
 *
 * Recent changes:
 * - 2025-12-29: OutboundType now supports node SID references (e.g., "node_xxx") for traffic routing to specific nodes
 * - 2025-12-29: Added RouteConfig and RouteRule types for traffic splitting configuration (sing-box compatible)
 * - 2025-12-29: Added route field to Node, CreateNodeRequest, UpdateNodeRequest for admin route management
 * - 2025-12-29: Added sortBy and sortOrder params to ListNodesParams for admin node sorting
 * - 2025-12-28: Enhanced NodeSystemStatus with procfs metrics (CPU%, memory details, load avg, network stats, etc.)
 * - 2025-12-22: Added owner field to Node for user-created nodes (NodeOwner type)
 * - 2025-12-22: Added includeUserNodes param to ListNodesParams for admin node filtering
 * - 2025-12-20: Added user node management types (UserNode, CreateUserNodeRequest, UpdateUserNodeRequest, etc.)
 * - 2025-12-18: Made serverAddress optional in CreateNodeRequest (can be auto-detected from agent)
 */

/**
 * Node status
 */
export type NodeStatus = 'active' | 'inactive' | 'maintenance';

/**
 * Node protocol type
 */
export type NodeProtocol = 'shadowsocks' | 'trojan';

/**
 * Transport protocol for Trojan
 */
export type TransportProtocol = 'tcp' | 'ws' | 'grpc';

/**
 * Outbound action type for routing rules
 * Supports preset types and node SID references for traffic splitting
 * - Preset types: "direct", "block", "proxy"
 * - Node reference: "node_xxx" (routes traffic through the specified node)
 * Added: 2025-12-29
 * Updated: 2025-12-29 - Added support for node SID references
 */
export type OutboundType = 'direct' | 'block' | 'proxy' | `node_${string}`;

/**
 * Route configuration for traffic splitting (sing-box compatible)
 * Added: 2025-12-29
 */
export interface RouteConfig {
  /** Ordered list of routing rules */
  rules?: RouteRule[];
  /** Default outbound when no rules match (direct/block/proxy or node_xxx) */
  final: OutboundType;
}

/**
 * Single routing rule, compatible with sing-box route rule
 * Added: 2025-12-29
 */
export interface RouteRule {
  // Domain matching
  /** Exact domain match */
  domain?: string[];
  /** Domain suffix match (e.g., ".cn", ".google.com") */
  domainSuffix?: string[];
  /** Domain keyword match */
  domainKeyword?: string[];
  /** Domain regex match */
  domainRegex?: string[];

  // IP matching
  /** Destination IP CIDR match */
  ipCidr?: string[];
  /** Source IP CIDR match */
  sourceIpCidr?: string[];
  /** Match private/LAN IP addresses */
  ipIsPrivate?: boolean;

  // GeoIP/GeoSite matching
  /** GeoIP country codes (e.g., "cn", "us") */
  geoip?: string[];
  /** GeoSite categories (e.g., "cn", "google", "telegram") */
  geosite?: string[];

  // Port matching
  /** Destination port match */
  port?: number[];
  /** Source port match */
  sourcePort?: number[];

  // Protocol/Network matching
  /** Sniffed protocol match (e.g., "http", "tls", "quic") */
  protocol?: string[];
  /** Network type match (e.g., "tcp", "udp") */
  network?: string[];

  // Rule set reference
  /** Rule set references */
  ruleSet?: string[];

  // Action
  /** Action: direct/block/proxy or node SID (node_xxx) for routing to specific node */
  outbound: OutboundType;
}

/**
 * Node owner information (for user-created nodes)
 * Added: 2025-12-22
 */
export interface NodeOwner {
  /** User's Stripe-style ID (e.g., "user_xK9mP2vL3nQ") */
  id: string;
  /** User's email address */
  email: string;
  /** User's display name */
  name: string;
}

/**
 * Node entity
 * ID format: "node_xK9mP2vL3nQ" (Stripe-style prefixed ID)
 * Updated: 2025-12-22 - Added owner field for user-created nodes
 */
export interface Node {
  id: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  name: string;
  serverAddress: string;
  /** Port for agent connections */
  agentPort: number;
  /** Port for client subscriptions (if null, uses agentPort) */
  subscriptionPort?: number;
  protocol: NodeProtocol;
  encryptionMethod: string;
  plugin?: string;
  pluginOpts?: Record<string, string>;
  status: NodeStatus;
  region?: string;
  tags?: string[];
  customFields?: Record<string, unknown>;
  sortOrder: number;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection */
  allowInsecure?: boolean;
  maintenanceReason?: string;
  /** Indicates if the node agent is online (reported within 5 minutes) */
  isOnline: boolean;
  /** Last time the node agent reported status */
  lastSeenAt?: string;
  /** Resource group SIDs this node belongs to (e.g., ["rg_xK9mP2vL3nQ", "rg_yL0nQ3wM4oR"]) */
  groupIds?: string[];
  version: number;
  createdAt: string;
  updatedAt: string;
  systemStatus?: NodeSystemStatus;
  /** Owner information for user-created nodes (null for admin-created nodes) */
  owner?: NodeOwner;
  /** Routing configuration for traffic splitting (sing-box compatible) */
  route?: RouteConfig;
}

/**
 * Node system status (real-time metrics from monitoring via procfs)
 * Updated: 2025-12-30 - Added platform, arch fields
 */
export interface NodeSystemStatus {
  /** CPU usage percentage (0-100) */
  cpuPercent: number;
  /** Memory usage percentage (0-100) */
  memoryPercent: number;
  /** Memory used in bytes */
  memoryUsed: number;
  /** Total memory in bytes */
  memoryTotal: number;
  /** Available memory in bytes */
  memoryAvail: number;
  /** Disk usage percentage (0-100) */
  diskPercent: number;
  /** Disk used in bytes */
  diskUsed: number;
  /** Total disk in bytes */
  diskTotal: number;
  /** System uptime in seconds */
  uptimeSeconds: number;
  /** 1-minute load average */
  loadAvg1: number;
  /** 5-minute load average */
  loadAvg5: number;
  /** 15-minute load average */
  loadAvg15: number;
  /** Total received bytes across all interfaces */
  networkRxBytes: number;
  /** Total transmitted bytes across all interfaces */
  networkTxBytes: number;
  /** Current receive rate in bytes per second */
  networkRxRate: number;
  /** Current transmit rate in bytes per second */
  networkTxRate: number;
  /** Number of TCP connections */
  tcpConnections: number;
  /** Number of UDP connections */
  udpConnections: number;
  /** Public IPv4 address reported by agent */
  publicIpv4?: string;
  /** Public IPv6 address reported by agent */
  publicIpv6?: string;
  /** Agent software version (e.g., "1.2.3") */
  agentVersion?: string;
  /** OS platform (linux, darwin, windows) (Added: 2025-12-30) */
  platform?: string;
  /** CPU architecture (amd64, arm64, arm, 386) (Added: 2025-12-30) */
  arch?: string;
  /** Last update timestamp (Unix seconds) */
  updatedAt: number;
}

/**
 * Create node request
 * POST /nodes
 */
export interface CreateNodeRequest {
  name: string;
  /** Server address (optional, can be auto-detected from agent's public IP) */
  serverAddress?: string;
  /** Port for agent connections (required) */
  agentPort: number;
  /** Port for client subscriptions (if null, uses agentPort) */
  subscriptionPort?: number;
  protocol: NodeProtocol;
  /** Encryption method (for Shadowsocks) */
  encryptionMethod?: string;
  plugin?: string;
  pluginOpts?: Record<string, string>;
  region?: string;
  tags?: string[];
  description?: string;
  sortOrder?: number;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection (for self-signed certs) */
  allowInsecure?: boolean;
  /** Routing configuration for traffic splitting (sing-box compatible) */
  route?: RouteConfig;
}

/**
 * Update node request
 * PUT /nodes/:id
 * Updated: 2025-12-29 - Added route field for traffic splitting configuration
 */
export interface UpdateNodeRequest {
  name?: string;
  serverAddress?: string;
  /** Port for agent connections */
  agentPort?: number;
  /** Port for client subscriptions */
  subscriptionPort?: number;
  /** Encryption method (for Shadowsocks) */
  encryptionMethod?: string;
  plugin?: string;
  pluginOpts?: Record<string, string>;
  status?: NodeStatus;
  region?: string;
  tags?: string[];
  description?: string;
  sortOrder?: number;
  /** Resource group SID to associate with (use empty string to remove association) */
  groupSid?: string;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection */
  allowInsecure?: boolean;
  /** Routing configuration for traffic splitting (sing-box compatible, null to clear) */
  route?: RouteConfig | null;
}

/**
 * Update node status request
 * PATCH /nodes/:id/status
 */
export interface UpdateNodeStatusRequest {
  status: NodeStatus;
}

/**
 * List nodes params
 * GET /nodes
 * Updated: 2025-12-29 - Added sortBy and sortOrder params
 */
export interface ListNodesParams {
  page?: number;
  pageSize?: number;
  status?: NodeStatus;
  /** Include user-created nodes in the list (default: false - only admin-created nodes) */
  includeUserNodes?: boolean;
  /** Field to sort by (default: "sort_order") */
  sortBy?: string;
  /** Sort order: "asc" or "desc" (default: "asc") */
  sortOrder?: 'asc' | 'desc';
}

/**
 * Generate node token response
 * POST /nodes/:id/tokens
 */
export interface GenerateNodeTokenResponse {
  nodeId: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  token: string;
  tokenPrefix: string;
  expiresAt?: string;
  createdAt: string;
}

/**
 * Generate node install script response
 * GET /nodes/:id/install-script
 */
export interface GenerateNodeInstallScriptResponse {
  installCommand: string;
  uninstallCommand: string;
  scriptUrl: string;
  apiUrl: string;
  nodeId: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  token: string;
}

/**
 * Generate node install script params
 * GET /nodes/:id/install-script
 */
export interface GetNodeInstallScriptParams {
  /** Override the node's stored token */
  token?: string;
  /** Override the default API URL */
  apiUrl?: string;
}

// ============================================================================
// User Node Management Types
// Added: 2025-12-20
// ============================================================================

/**
 * User-owned node entity
 * Contains fewer fields than Node, hiding admin-specific information
 * GET /user/nodes/:id
 * Added: 2025-12-20
 */
export interface UserNode {
  id: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  name: string;
  serverAddress: string;
  /** Port for agent connections */
  agentPort: number;
  /** Port for client subscriptions (if null, uses agentPort) */
  subscriptionPort?: number;
  protocol: NodeProtocol;
  /** Encryption method (Shadowsocks only) */
  encryptionMethod?: string;
  status: NodeStatus;
  /** Indicates if the node agent is online */
  isOnline: boolean;
  /** Last time the node agent reported status */
  lastSeenAt?: string;
  /** Transport protocol for Trojan */
  transportProtocol?: TransportProtocol;
  /** WebSocket host or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS SNI */
  sni?: string;
  /** Allow insecure TLS */
  allowInsecure?: boolean;
  createdAt: string;
  updatedAt: string;
}

/**
 * Create user node request
 * POST /user/nodes
 * Added: 2025-12-20
 */
export interface CreateUserNodeRequest {
  name: string;
  /** Server address (optional, can be auto-detected from agent's public IP) */
  serverAddress?: string;
  /** Port for agent connections (required) */
  agentPort: number;
  /** Port for client subscriptions (if null, uses agentPort) */
  subscriptionPort?: number;
  /** Protocol type: shadowsocks or trojan */
  protocol: NodeProtocol;
  /** Encryption method (for Shadowsocks, e.g., "aes-256-gcm") */
  method?: string;
  /** Plugin name (for Shadowsocks) */
  plugin?: string;
  /** Plugin options */
  pluginOpts?: Record<string, string>;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection */
  allowInsecure?: boolean;
}

/**
 * Create user node response
 * POST /user/nodes
 * Added: 2025-12-20
 */
export interface CreateUserNodeResponse {
  node: UserNode;
  /** Token for node authentication (only shown once) */
  token: string;
  /** Token prefix for identification */
  tokenPrefix: string;
}

/**
 * Update user node request
 * PUT /user/nodes/:id
 * Added: 2025-12-20
 */
export interface UpdateUserNodeRequest {
  name?: string;
  serverAddress?: string;
  /** Port for agent connections */
  agentPort?: number;
  /** Port for client subscriptions */
  subscriptionPort?: number;
}

/**
 * List user nodes params
 * GET /user/nodes
 * Added: 2025-12-20
 */
export interface ListUserNodesParams {
  page?: number;
  pageSize?: number;
  status?: NodeStatus;
  search?: string;
  sortBy?: string;
  sortOrder?: 'asc' | 'desc';
}

/**
 * Regenerate user node token response
 * POST /user/nodes/:id/regenerate-token
 * Added: 2025-12-20
 */
export interface RegenerateUserNodeTokenResponse {
  nodeId: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  /** New token (only shown once) */
  token: string;
  /** Token prefix for identification */
  tokenPrefix: string;
}

/**
 * User node usage/quota response
 * GET /user/nodes/usage
 * Added: 2025-12-20
 */
export interface UserNodeUsage {
  /** Current number of user-owned nodes */
  nodeCount: number;
  /** Maximum allowed nodes (0 means unlimited) */
  nodeLimit: number;
}

/**
 * User node install script response
 * GET /user/nodes/:id/install-script
 * Added: 2025-12-20
 */
export interface UserNodeInstallScriptResponse {
  installCommand: string;
  uninstallCommand: string;
  scriptUrl: string;
  apiUrl: string;
  /** Internal node ID (numeric) */
  nodeId: number;
  token: string;
}

/**
 * User node install script params
 * GET /user/nodes/:id/install-script
 * Added: 2025-12-20
 */
export interface GetUserNodeInstallScriptParams {
  /** Override the default API URL */
  apiUrl?: string;
}
