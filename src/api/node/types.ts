/**
 * AUTO-GENERATED - DO NOT EDIT
 * Generated by Claude from backend Go code
 * Source: orris backend node module
 * Last updated: 2025-12-19
 *
 * Note: All properties use camelCase. The axios-case-converter middleware
 * automatically converts between snake_case (API) and camelCase (frontend).
 *
 * ID Format: Stripe-style prefixed IDs
 * - Node: "node_xK9mP2vL3nQ" (prefix: node_)
 *
 * Recent changes:
 * - 2025-12-18: Made serverAddress optional in CreateNodeRequest (can be auto-detected from agent)
 * - 2025-12-18: Removed all NodeGroup related types (NodeGroup feature removed)
 */

/**
 * Node status
 */
export type NodeStatus = 'active' | 'inactive' | 'maintenance';

/**
 * Node protocol type
 */
export type NodeProtocol = 'shadowsocks' | 'trojan';

/**
 * Transport protocol for Trojan
 */
export type TransportProtocol = 'tcp' | 'ws' | 'grpc';

/**
 * Node entity
 * ID format: "node_xK9mP2vL3nQ" (Stripe-style prefixed ID)
 * Updated: 2025-12-19 - Changed groupId to groupIds array for multiple resource groups
 */
export interface Node {
  id: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  name: string;
  serverAddress: string;
  /** Port for agent connections */
  agentPort: number;
  /** Port for client subscriptions (if null, uses agentPort) */
  subscriptionPort?: number;
  protocol: NodeProtocol;
  encryptionMethod: string;
  plugin?: string;
  pluginOpts?: Record<string, string>;
  status: NodeStatus;
  region?: string;
  tags?: string[];
  customFields?: Record<string, unknown>;
  sortOrder: number;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection */
  allowInsecure?: boolean;
  maintenanceReason?: string;
  /** Indicates if the node agent is online (reported within 5 minutes) */
  isOnline: boolean;
  /** Last time the node agent reported status */
  lastSeenAt?: string;
  /** Resource group SIDs this node belongs to (e.g., ["rg_xK9mP2vL3nQ", "rg_yL0nQ3wM4oR"]) */
  groupIds?: string[];
  version: number;
  createdAt: string;
  updatedAt: string;
  systemStatus?: NodeSystemStatus;
}

/**
 * Node system status (real-time metrics from monitoring)
 */
export interface NodeSystemStatus {
  cpu: string;
  memory: string;
  disk: string;
  uptime: number;
  updatedAt: number;
  /** Public IPv4 address reported by agent */
  publicIpv4?: string;
  /** Public IPv6 address reported by agent */
  publicIpv6?: string;
}

/**
 * Create node request
 * POST /nodes
 */
export interface CreateNodeRequest {
  name: string;
  /** Server address (optional, can be auto-detected from agent's public IP) */
  serverAddress?: string;
  /** Port for agent connections (required) */
  agentPort: number;
  /** Port for client subscriptions (if null, uses agentPort) */
  subscriptionPort?: number;
  protocol: NodeProtocol;
  /** Encryption method (for Shadowsocks) */
  encryptionMethod?: string;
  plugin?: string;
  pluginOpts?: Record<string, string>;
  region?: string;
  tags?: string[];
  description?: string;
  sortOrder?: number;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection (for self-signed certs) */
  allowInsecure?: boolean;
}

/**
 * Update node request
 * PUT /nodes/:id
 * Updated: 2025-12-19 - Added groupSid field for resource group association
 */
export interface UpdateNodeRequest {
  name?: string;
  serverAddress?: string;
  /** Port for agent connections */
  agentPort?: number;
  /** Port for client subscriptions */
  subscriptionPort?: number;
  /** Encryption method (for Shadowsocks) */
  encryptionMethod?: string;
  plugin?: string;
  pluginOpts?: Record<string, string>;
  status?: NodeStatus;
  region?: string;
  tags?: string[];
  description?: string;
  sortOrder?: number;
  /** Resource group SID to associate with (use empty string to remove association) */
  groupSid?: string;
  /** Transport protocol for Trojan (tcp, ws, grpc) */
  transportProtocol?: TransportProtocol;
  /** WebSocket host header or gRPC service name */
  host?: string;
  /** WebSocket path */
  path?: string;
  /** TLS Server Name Indication */
  sni?: string;
  /** Allow insecure TLS connection */
  allowInsecure?: boolean;
}

/**
 * Update node status request
 * PATCH /nodes/:id/status
 */
export interface UpdateNodeStatusRequest {
  status: NodeStatus;
}

/**
 * List nodes params
 * GET /nodes
 */
export interface ListNodesParams {
  page?: number;
  pageSize?: number;
  status?: NodeStatus;
}

/**
 * Generate node token response
 * POST /nodes/:id/tokens
 */
export interface GenerateNodeTokenResponse {
  nodeId: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  token: string;
  tokenPrefix: string;
  expiresAt?: string;
  createdAt: string;
}

/**
 * Generate node install script response
 * GET /nodes/:id/install-script
 */
export interface GenerateNodeInstallScriptResponse {
  installCommand: string;
  uninstallCommand: string;
  scriptUrl: string;
  apiUrl: string;
  nodeId: string; // Stripe-style prefixed ID (e.g., "node_xK9mP2vL3nQ")
  token: string;
}

/**
 * Generate node install script params
 * GET /nodes/:id/install-script
 */
export interface GetNodeInstallScriptParams {
  /** Override the node's stored token */
  token?: string;
  /** Override the default API URL */
  apiUrl?: string;
}
