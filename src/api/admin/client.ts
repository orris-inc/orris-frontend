/**
 * AUTO-GENERATED - DO NOT EDIT
 * Generated by Claude from backend Go code
 * Source: internal/interfaces/http/handlers/admin/subscriptionhandler.go
 * Last updated: 2025-12-03
 */

import { apiClient } from '@/shared/lib/axios';
import type { APIResponse, ListResponse } from '@/shared/types/api.types';
import type { Subscription } from '../subscription/types';
import type {
  AdminCreateSubscriptionRequest,
  AdminCreateSubscriptionResponse,
  AdminUpdateSubscriptionStatusRequest,
  AdminChangePlanRequest,
  AdminListSubscriptionsParams,
} from './types';

/**
 * Create subscription (Admin)
 * POST /admin/subscriptions
 *
 * Creates a new subscription for a user with specified plan and billing cycle.
 * Returns both subscription and initial token.
 */
export const adminCreateSubscription = async (
  data: AdminCreateSubscriptionRequest
): Promise<AdminCreateSubscriptionResponse> => {
  const response = await apiClient.post<APIResponse<AdminCreateSubscriptionResponse>>(
    '/admin/subscriptions',
    data
  );
  return response.data.data;
};

/**
 * Get subscription by ID (Admin)
 * GET /admin/subscriptions/:id
 *
 * Retrieves detailed information about a specific subscription.
 */
export const adminGetSubscription = async (id: number | string): Promise<Subscription> => {
  const response = await apiClient.get<APIResponse<Subscription>>(
    `/admin/subscriptions/${id}`
  );
  return response.data.data;
};

/**
 * List all subscriptions (Admin)
 * GET /admin/subscriptions
 *
 * Lists subscriptions with optional filtering by user ID and status.
 * Supports pagination.
 */
export const adminListSubscriptions = async (
  params?: AdminListSubscriptionsParams
): Promise<ListResponse<Subscription>> => {
  const response = await apiClient.get<APIResponse<ListResponse<Subscription>>>(
    '/admin/subscriptions',
    { params }
  );
  return response.data.data;
};

/**
 * Update subscription status (Admin)
 * PATCH /admin/subscriptions/:id/status
 *
 * Changes subscription status:
 * - 'active': Activates a subscription
 * - 'cancelled': Cancels a subscription (requires reason)
 * - 'renewed': Manually renews a subscription
 */
export const adminUpdateSubscriptionStatus = async (
  id: number | string,
  data: AdminUpdateSubscriptionStatusRequest
): Promise<void> => {
  await apiClient.patch(`/admin/subscriptions/${id}/status`, data);
};

/**
 * Change subscription plan (Admin)
 * PATCH /admin/subscriptions/:id/plan
 *
 * Changes the subscription to a different plan.
 * Can be applied immediately or at the end of current period.
 */
export const adminChangeSubscriptionPlan = async (
  id: number | string,
  data: AdminChangePlanRequest
): Promise<void> => {
  await apiClient.patch(`/admin/subscriptions/${id}/plan`, data);
};
